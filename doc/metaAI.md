
# メタAI設計

ここでは、ゲームデモ内で使用しているメタAIについての設計を記します。

- このゲームデモ内のメタAIは下記の三つのステートによって処理を変えます。
  - 敵増加フェーズ(IncreaseEnemySequenceクラス)
  - ラッシュフェーズ(RushSequenceクラス)
  - リラックスフェーズ(RelaxSequenceクラス)
  
    - この三つのフェーズは、プレイヤーが緊迫しているフェーズ(敵が多い)と、リラックスしているフェーズ(敵の数が少ない)が繰り返されると、プレイヤーはゲームに没頭しやすいのではないかという、下記の参考文献にあった記述を基にしている。
      - 参考文献：[ゲームAI技術入門](https://www.amazon.co.jp/%E3%82%B2%E3%83%BC%E3%83%A0AI%E6%8A%80%E8%A1%93%E5%85%A5%E9%96%80-%E2%94%80%E2%94%80%E5%BA%83%E5%A4%A7%E3%81%AA%E4%BA%BA%E5%B7%A5%E7%9F%A5%E8%83%BD%E3%81%AE%E4%B8%96%E7%95%8C%E3%82%92%E4%BD%93%E7%B3%BB%E7%9A%84%E3%81%AB%E5%AD%A6%E3%81%B6-WEB-PRESS-plus-ebook/dp/B07YFBSL3S/)

- この三つのフェーズは下記のように切り替わります。

![ステートマシン](/img/metaAI_state.png)

- 各フェーズの機能に関しては下記のとおりです。

## 敵増加フェーズ(IncreaseEnemySequenceクラス)

- 敵の生成間隔を、ゲームループ一回につき0.01秒ずつ狭めていきます。

- 敵は下記のルールで生成されます。
  - ラッシュフェーズとのすみわけのため、敵の宇宙船は最大一体しか生成されません。
  - 隕石は画面内の隕石の最大数(20)に達するまで生成され続けます。

- 生成間隔が最小値である0.5秒に到達すると、ラッシュフェーズへ切り替わります。

## ラッシュフェーズ(RushSequenceクラス)

- 敵の生成間隔は0.5秒で固定されます。

- 敵は下記のルールで生成されます。
  - 敵の宇宙船は最大数(5)の達するまで生成され続けます。
  - 隕石は画面内の隕石の最大数(20)の達するまで生成され続けます。

- プレイヤーが敵の宇宙船を五体倒すとリラックスフェーズへ切り替わります。
 
## リラックスフェーズ(RelaxSequenceクラス)

- 敵の生成間隔を、ゲームループ一回につき0.01秒ずつ広げていきます。

- 敵は下記のルールで生成されます。
  - 敵の宇宙船は生成されません。
  - 隕石は画面内の隕石の最大数(20)に達するまで生成され続けます。

- 生成間隔が最大値である1秒に到達すると、敵増加フェーズへ切り替わります。


